  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (31.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (28.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:48:34.235786', '2025-12-28 13:48:34.235789') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:48:34.237998', '2025-12-28 13:48:34.238000') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("admin", "banned_until", "created_at", "email", "email_verified_at", "google_uid", "normalized_email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["admin", false], ["banned_until", nil], ["created_at", "2025-12-28 13:55:56.542558"], ["email", "[FILTERED]"], ["email_verified_at", "[FILTERED]"], ["google_uid", nil], ["normalized_email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["updated_at", "2025-12-28 13:55:56.542558"]]
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Create (0.1ms)[0m  [1m[32mINSERT INTO "users" ("admin", "banned_until", "created_at", "email", "email_verified_at", "google_uid", "normalized_email", "password_digest", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["admin", false], ["banned_until", nil], ["created_at", "2025-12-28 13:55:56.553154"], ["email", "[FILTERED]"], ["email_verified_at", "[FILTERED]"], ["google_uid", nil], ["normalized_email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["updated_at", "2025-12-28 13:55:56.553154"]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (37.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (31.9ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:56:24.532429', '2025-12-28 13:56:24.532432') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:56:24.534293', '2025-12-28 13:56:24.534294') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (31.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (25.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:56:49.047092', '2025-12-28 13:56:49.047094') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:56:49.049040', '2025-12-28 13:56:49.049041') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (32.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (25.4ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:56:52.501709', '2025-12-28 13:56:52.501711') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:56:52.503979', '2025-12-28 13:56:52.503980') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (32.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (28.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:57:03.956716', '2025-12-28 13:57:03.956719') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:57:03.958602', '2025-12-28 13:57:03.958603') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (36.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.5ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:57:25.583236', '2025-12-28 13:57:25.583239') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:57:25.586092', '2025-12-28 13:57:25.586093') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (47.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.8ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:57:44.167925', '2025-12-28 13:57:44.167926') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:57:44.170866', '2025-12-28 13:57:44.170867') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (55.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:57:58.719071', '2025-12-28 13:57:58.719074') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:57:58.721962', '2025-12-28 13:57:58.721963') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (45.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (32.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:58:14.447912', '2025-12-28 13:58:14.447915') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:58:14.451017', '2025-12-28 13:58:14.451019') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.6ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:58:21.919161', '2025-12-28 13:58:21.919165') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:58:21.922227', '2025-12-28 13:58:21.922229') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (47.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.5ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:58:29.181136', '2025-12-28 13:58:29.181141') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:58:29.184237', '2025-12-28 13:58:29.184239') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (47.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (40.8ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:58:43.390330', '2025-12-28 13:58:43.390333') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:58:43.393599', '2025-12-28 13:58:43.393603') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (52.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.4ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:58:47.348656', '2025-12-28 13:58:47.348659') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:58:47.351600', '2025-12-28 13:58:47.351601') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.8ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:58:54.904787', '2025-12-28 13:58:54.904790') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:58:54.907985', '2025-12-28 13:58:54.907987') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (50.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.0ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:58:59.065540', '2025-12-28 13:58:59.065544') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:58:59.068730', '2025-12-28 13:58:59.068731') RETURNING "key"[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."normalized_email" = $1 LIMIT $2[0m  [["normalized_email", "[FILTERED]"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (52.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (37.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:59:09.724458', '2025-12-28 13:59:09.724463') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:59:09.727625', '2025-12-28 13:59:09.727626') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (53.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (40.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:59:16.433704', '2025-12-28 13:59:16.433706') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:59:16.436885', '2025-12-28 13:59:16.436886') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (53.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:59:20.200476', '2025-12-28 13:59:20.200478') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:59:20.203283', '2025-12-28 13:59:20.203284') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (73.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (39.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:59:24.309074', '2025-12-28 13:59:24.309078') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:59:24.311975', '2025-12-28 13:59:24.311976') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (52.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (35.5ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:59:38.360504', '2025-12-28 13:59:38.360506') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:59:38.363716', '2025-12-28 13:59:38.363718') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (48.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (38.6ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:59:48.823247', '2025-12-28 13:59:48.823250') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (3.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:59:48.826800', '2025-12-28 13:59:48.826802') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (60.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (42.6ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 13:59:53.097533', '2025-12-28 13:59:53.097536') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 13:59:53.100700', '2025-12-28 13:59:53.100702') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (44.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (37.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228133926)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:00:00.523010', '2025-12-28 14:00:00.523012') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '90f0fdfd3c6179ec9e328af9668b0b1605a14f92', '2025-12-28 14:00:00.526199', '2025-12-28 14:00:00.526201') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (43.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.4ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:11:44.572170', '2025-12-28 14:11:44.572173') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:11:44.575128', '2025-12-28 14:11:44.575129') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (50.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (40.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:12:14.919501', '2025-12-28 14:12:14.919504') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:12:14.922738', '2025-12-28 14:12:14.922740') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (48.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (37.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:12:18.482465', '2025-12-28 14:12:18.482469') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:12:18.485616', '2025-12-28 14:12:18.485617') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (59.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (32.7ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:12:40.906632', '2025-12-28 14:12:40.906636') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:12:40.910192', '2025-12-28 14:12:40.910194') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (77.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (35.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:13:31.242814', '2025-12-28 14:13:31.242817') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:13:31.245833', '2025-12-28 14:13:31.245834') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (35.0ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:14:29.787266', '2025-12-28 14:14:29.787269') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:14:29.790426', '2025-12-28 14:14:29.790427') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.7ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:14:46.644462', '2025-12-28 14:14:46.644465') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:14:46.647758', '2025-12-28 14:14:46.647760') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (58.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.7ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:15:04.441749', '2025-12-28 14:15:04.441753') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:15:04.445313', '2025-12-28 14:15:04.445315') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (55.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (35.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:15:08.509882', '2025-12-28 14:15:08.509886') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:15:08.513374', '2025-12-28 14:15:08.513375') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.4ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:15:23.242425', '2025-12-28 14:15:23.242427') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:15:23.245385', '2025-12-28 14:15:23.245386') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (119.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.5ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:15:27.374561', '2025-12-28 14:15:27.374565') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:15:27.377633', '2025-12-28 14:15:27.377635') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (50.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (32.6ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:15:40.978292', '2025-12-28 14:15:40.978295') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:15:40.981236', '2025-12-28 14:15:40.981237') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.7ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:15:45.016817', '2025-12-28 14:15:45.016821') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:15:45.019905', '2025-12-28 14:15:45.019906') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (50.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.8ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:15:59.628181', '2025-12-28 14:15:59.628184') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:15:59.631114', '2025-12-28 14:15:59.631115') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (32.4ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:16:22.463424', '2025-12-28 14:16:22.463428') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:16:22.466987', '2025-12-28 14:16:22.466989') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (122.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (31.9ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:16:30.759490', '2025-12-28 14:16:30.759494') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:16:30.762604', '2025-12-28 14:16:30.762605') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (35.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:16:50.113964', '2025-12-28 14:16:50.113969') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:16:50.117212', '2025-12-28 14:16:50.117213') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (58.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:16:58.386340', '2025-12-28 14:16:58.386344') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:16:58.389446', '2025-12-28 14:16:58.389447') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (119.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.6ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:17:03.653837', '2025-12-28 14:17:03.653840') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:17:03.657163', '2025-12-28 14:17:03.657164') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:17:35.138066', '2025-12-28 14:17:35.138069') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:17:35.141296', '2025-12-28 14:17:35.141297') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (37.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:17:39.239467', '2025-12-28 14:17:39.239471') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:17:39.242956', '2025-12-28 14:17:39.242958') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (115.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:17:47.196077', '2025-12-28 14:17:47.196082') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:17:47.199274', '2025-12-28 14:17:47.199275') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (46.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (32.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:19:45.969014', '2025-12-28 14:19:45.969017') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:19:45.971987', '2025-12-28 14:19:45.971988') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (55.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (37.0ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:21:50.187729', '2025-12-28 14:21:50.187733') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:21:50.191377', '2025-12-28 14:21:50.191379') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (56.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.7ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:22:33.142059', '2025-12-28 14:22:33.142062') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:22:33.145335', '2025-12-28 14:22:33.145338') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (35.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:22:41.283596', '2025-12-28 14:22:41.283602') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:22:41.287716', '2025-12-28 14:22:41.287719') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (118.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:22:45.761308', '2025-12-28 14:22:45.761311') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:22:45.764497', '2025-12-28 14:22:45.764498') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (54.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (38.4ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:23:05.915484', '2025-12-28 14:23:05.915487') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:23:05.918887', '2025-12-28 14:23:05.918889') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (38.7ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (9.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (20.4ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (17.4ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (25.6ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (12.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (5.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (4.1ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.6ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (4.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (4.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (5.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (5.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (24.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (3.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (4.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:23:12.092869', '2025-12-28 14:23:12.092872') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (4.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:23:12.098470', '2025-12-28 14:23:12.098472') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:24:02.964292', '2025-12-28 14:24:02.964295') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:24:02.967165', '2025-12-28 14:24:02.967166') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.5ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:24:23.103363', '2025-12-28 14:24:23.103366') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:24:23.106782', '2025-12-28 14:24:23.106786') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (52.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (37.5ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:24:37.724855', '2025-12-28 14:24:37.724858') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:24:37.727759', '2025-12-28 14:24:37.727761') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (49.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (38.0ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:24:42.359173', '2025-12-28 14:24:42.359176') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:24:42.362353', '2025-12-28 14:24:42.362354') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (56.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:24:52.902966', '2025-12-28 14:24:52.902967') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:24:52.905976', '2025-12-28 14:24:52.905978') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (110.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.1ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.0ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:24:58.956184', '2025-12-28 14:24:58.956186') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:24:58.959430', '2025-12-28 14:24:58.959431') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (61.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (33.4ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (12.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (14.3ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (13.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:25:48.774276', '2025-12-28 14:25:48.774278') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:25:48.777266', '2025-12-28 14:25:48.777268') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.9ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:25:57.289885', '2025-12-28 14:25:57.289887') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:25:57.293213', '2025-12-28 14:25:57.293215') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (113.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (35.0ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (13.6ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:26:01.773898', '2025-12-28 14:26:01.773901') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:26:01.777008', '2025-12-28 14:26:01.777009') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (55.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (34.8ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (6.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:26:20.828764', '2025-12-28 14:26:20.828768') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:26:20.831837', '2025-12-28 14:26:20.831838') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (57.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (49.4ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (9.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (9.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.8ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (16.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (3.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-28 14:26:26.531187', '2025-12-28 14:26:26.531190') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-28 14:26:26.535324', '2025-12-28 14:26:26.535327') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (54.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (84.2ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (11.0ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.6ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (13.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:28:05.298486', '2025-12-29 09:28:05.298491') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:28:05.302765', '2025-12-29 09:28:05.302768') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (55.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (43.8ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (7.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (12.5ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:28:37.047525', '2025-12-29 09:28:37.047529') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:28:37.052618', '2025-12-29 09:28:37.052624') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (63.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (35.5ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (13.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:29:26.091048', '2025-12-29 09:29:26.091053') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:29:26.095806', '2025-12-29 09:29:26.095809') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (57.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.0ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (9.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (6.9ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (12.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (4.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.2ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:29:51.781844', '2025-12-29 09:29:51.781847') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:29:51.787173', '2025-12-29 09:29:51.787176') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (61.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (38.0ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (8.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.9ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.3ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (9.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:30:01.196725', '2025-12-29 09:30:01.196728') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:30:01.200048', '2025-12-29 09:30:01.200051') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (55.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (36.6ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (8.5ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:30:10.526344', '2025-12-29 09:30:10.526347') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (1.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:30:10.531195', '2025-12-29 09:30:10.531197') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (56.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (41.9ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (9.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (11.5ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.2ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (4.4ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (11.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:30:34.403872', '2025-12-29 09:30:34.403877') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:30:34.412794', '2025-12-29 09:30:34.412799') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.1ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (57.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (40.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (9.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (4.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.3ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:30:44.579090', '2025-12-29 09:30:44.579093') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:30:44.584324', '2025-12-29 09:30:44.584329') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35mSQL (0.0ms)[0m  [1m[35mSET search_path TO public[0m
  [1m[35m (51.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "klosaer_web_test"[0m
  [1m[35m (39.3ms)[0m  [1m[35mCREATE DATABASE "klosaer_web_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (11.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql" SCHEMA pg_catalog[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "claims" CASCADE[0m
  [1m[35m (8.1ms)[0m  [1m[35mCREATE TABLE "claims" ("id" bigserial primary key, "claimed_at" timestamp(6) NOT NULL, "clue_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL, "validated" boolean DEFAULT FALSE NOT NULL)[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE INDEX "index_claims_on_clue_id" ON "claims" ("clue_id")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_claims_on_user_id_and_clue_id" ON "claims" ("user_id", "clue_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_claims_on_user_id" ON "claims" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "clues" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "clues" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "description" text NOT NULL, "hunt_id" bigint NOT NULL, "latitude" decimal(10,7) NOT NULL, "longitude" decimal(10,7) NOT NULL, "order" integer NOT NULL, "radius" integer DEFAULT 10 NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_clues_on_hunt_id_and_order" ON "clues" ("hunt_id", "order")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_clues_on_hunt_id" ON "clues" ("hunt_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "devices" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "devices" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "device_identifier" character varying NOT NULL, "fingerprint_hash" character varying NOT NULL, "registered_at" timestamp(6), "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_devices_on_device_identifier" ON "devices" ("device_identifier")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_devices_on_fingerprint_hash" ON "devices" ("fingerprint_hash")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_devices_on_user_id_and_device_identifier" ON "devices" ("user_id", "device_identifier")[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE INDEX "index_devices_on_user_id" ON "devices" ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunt_accesses" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "hunt_accesses" ("id" bigserial primary key, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "source" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (7.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_hunt_id" ON "hunt_accesses" ("hunt_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_source" ON "hunt_accesses" ("source")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_hunt_accesses_on_user_id_and_hunt_id" ON "hunt_accesses" ("user_id", "hunt_id")[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE INDEX "index_hunt_accesses_on_user_id" ON "hunt_accesses" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "hunts" CASCADE[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "hunts" ("id" bigserial primary key, "auto_generated" boolean DEFAULT FALSE NOT NULL, "city" character varying NOT NULL, "created_at" timestamp(6) NOT NULL, "description" text, "difficulty" integer DEFAULT 1 NOT NULL, "ends_at" timestamp(6), "kind" character varying NOT NULL, "price" decimal(10,2) DEFAULT 0.0 NOT NULL, "reward" text, "starts_at" timestamp(6), "status" character varying DEFAULT 'draft' NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_auto_generated" ON "hunts" ("auto_generated")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_difficulty" ON "hunts" ("difficulty")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_kind" ON "hunts" ("kind")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE INDEX "index_hunts_on_status" ON "hunts" ("status")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "amount" decimal(10,2) NOT NULL, "created_at" timestamp(6) NOT NULL, "hunt_id" bigint NOT NULL, "purchased_at" timestamp(6), "status" character varying DEFAULT 'pending' NOT NULL, "stripe_payment_intent_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_hunt_id" ON "purchases" ("hunt_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_status" ON "purchases" ("status")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_purchases_on_stripe_payment_intent_id" ON "purchases" ("stripe_payment_intent_id")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_user_id" ON "purchases" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "subscriptions" CASCADE[0m
  [1m[35m (13.2ms)[0m  [1m[35mCREATE TABLE "subscriptions" ("id" bigserial primary key, "canceled_at" timestamp(6), "created_at" timestamp(6) NOT NULL, "current_period_end" timestamp(6) NOT NULL, "current_period_start" timestamp(6) NOT NULL, "plan_type" character varying NOT NULL, "status" character varying NOT NULL, "stripe_subscription_id" character varying NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint NOT NULL)[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_status" ON "subscriptions" ("status")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_subscriptions_on_stripe_subscription_id" ON "subscriptions" ("stripe_subscription_id")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE INDEX "index_subscriptions_on_user_id" ON "subscriptions" ("user_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "admin" boolean DEFAULT FALSE NOT NULL, "banned_until" timestamp(6), "created_at" timestamp(6) NOT NULL, "email" character varying NOT NULL, "email_verification_token" character varying, "email_verified_at" timestamp(6), "google_uid" character varying, "normalized_email" character varying NOT NULL, "password_digest" character varying, "password_reset_sent_at" timestamp(6), "password_reset_token" character varying, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email_verification_token" ON "users" ("email_verification_token") WHERE (email_verification_token IS NOT NULL)[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_google_uid" ON "users" ("google_uid") WHERE (google_uid IS NOT NULL)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_normalized_email" ON "users" ("normalized_email")[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_password_reset_token" ON "users" ("password_reset_token") WHERE (password_reset_token IS NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_1f88999900"
FOREIGN KEY ("clue_id")
  REFERENCES "clues" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "claims" ADD CONSTRAINT "fk_rails_eea3fccade"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "clues" ADD CONSTRAINT "fk_rails_6f0933204f"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.8ms)[0m  [1m[35mALTER TABLE "devices" ADD CONSTRAINT "fk_rails_410b63ef65"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_3f91811a60"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (3.7ms)[0m  [1m[35mALTER TABLE "hunt_accesses" ADD CONSTRAINT "fk_rails_033d7044d3"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (3.4ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2998c94139"
FOREIGN KEY ("hunt_id")
  REFERENCES "hunts" ("id")
[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_2888c5cba9"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "subscriptions" ADD CONSTRAINT "fk_rails_933bdff476"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20251228140103)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20251228133926),
(20251228133925),
(20251228133924),
(20251228133911),
(20251228133848),
(20251228133835),
(20251228133817),
(20251228133757);[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2025-12-29 09:30:51.211427', '2025-12-29 09:30:51.211430') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (2.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '99b456b61e31d0147751694d7ce48cc6c4d9a562', '2025-12-29 09:30:51.217700', '2025-12-29 09:30:51.217705') RETURNING "key"[0m
