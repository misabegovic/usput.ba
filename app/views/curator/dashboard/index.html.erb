<div class="space-y-4 sm:space-y-6">
  <h1 class="text-xl sm:text-2xl font-bold text-gray-900"><%= t("curator.dashboard.welcome", username: current_user.username) %></h1>

  <!-- Basic Stats Overview -->
  <div class="grid grid-cols-2 gap-3 sm:gap-5 sm:grid-cols-4">
    <div class="overflow-hidden rounded-lg bg-white px-4 py-4 shadow sm:py-5 sm:px-6">
      <dt class="truncate text-sm font-medium text-gray-500"><%= t("curator.dashboard.total_locations") %></dt>
      <dd class="mt-1 text-2xl sm:text-3xl font-semibold tracking-tight text-gray-900"><%= @stats[:locations_count] %></dd>
    </div>
    <div class="overflow-hidden rounded-lg bg-white px-4 py-4 shadow sm:py-5 sm:px-6">
      <dt class="truncate text-sm font-medium text-gray-500"><%= t("curator.dashboard.total_experiences") %></dt>
      <dd class="mt-1 text-2xl sm:text-3xl font-semibold tracking-tight text-gray-900"><%= @stats[:experiences_count] %></dd>
    </div>
    <div class="overflow-hidden rounded-lg bg-white px-4 py-4 shadow sm:py-5 sm:px-6">
      <dt class="truncate text-sm font-medium text-gray-500"><%= t("curator.dashboard.total_cities") %></dt>
      <dd class="mt-1 text-2xl sm:text-3xl font-semibold tracking-tight text-gray-900"><%= @stats[:cities_count] %></dd>
    </div>
    <div class="overflow-hidden rounded-lg bg-white px-4 py-4 shadow sm:py-5 sm:px-6">
      <dt class="truncate text-sm font-medium text-gray-500"><%= t("curator.dashboard.total_plans") %></dt>
      <dd class="mt-1 text-2xl sm:text-3xl font-semibold tracking-tight text-gray-900"><%= @stats[:plans_count] %></dd>
    </div>
  </div>

  <!-- Reviews & Audio Stats -->
  <div class="grid grid-cols-2 gap-3 sm:gap-5 sm:grid-cols-4">
    <div class="overflow-hidden rounded-lg bg-white px-4 py-4 shadow">
      <dt class="truncate text-sm font-medium text-gray-500"><%= t("curator.dashboard.total_reviews") %></dt>
      <dd class="mt-1 text-xl font-semibold tracking-tight text-gray-900"><%= @stats[:reviews_count] %></dd>
      <dd class="text-sm text-gray-500">
        <span class="inline-flex items-center">
          <svg class="h-4 w-4 text-yellow-400 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
          </svg>
          <%= @stats[:average_rating] %> <%= t("curator.dashboard.avg") %>
        </span>
      </dd>
    </div>
    <div class="overflow-hidden rounded-lg bg-white px-4 py-4 shadow">
      <dt class="truncate text-sm font-medium text-gray-500"><%= t("curator.dashboard.recent_reviews") %></dt>
      <dd class="mt-1 text-xl font-semibold tracking-tight text-gray-900"><%= @stats[:pending_reviews] %></dd>
      <dd class="text-sm text-gray-500"><%= t("curator.dashboard.last_7_days") %></dd>
    </div>
    <div class="overflow-hidden rounded-lg bg-white px-4 py-4 shadow">
      <dt class="truncate text-sm font-medium text-gray-500"><%= t("curator.dashboard.audio_tours") %></dt>
      <dd class="mt-1 text-xl font-semibold tracking-tight text-gray-900"><%= @stats[:audio_tours_with_audio] %>/<%= @stats[:audio_tours_count] %></dd>
      <dd class="text-sm text-gray-500"><%= t("curator.dashboard.with_audio") %></dd>
    </div>
    <div class="overflow-hidden rounded-lg bg-white px-4 py-4 shadow">
      <dt class="truncate text-sm font-medium text-gray-500"><%= t("curator.dashboard.audio_coverage") %></dt>
      <dd class="mt-1 text-xl font-semibold tracking-tight text-emerald-600"><%= @stats[:audio_coverage_percent] %>%</dd>
      <dd class="text-sm text-gray-500"><%= @stats[:locations_with_audio] %>/<%= @stats[:locations_count] %> <%= t("curator.dashboard.locations_covered") %></dd>
    </div>
  </div>

  <!-- Pending Proposals Alert -->
  <% if @pending_proposals_count > 0 %>
    <div class="rounded-lg bg-amber-50 border border-amber-200 p-4">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-amber-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
          </svg>
        </div>
        <div class="ml-3 flex-1">
          <p class="text-sm text-amber-700">
            <%= t("curator.dashboard.pending_proposals_alert", count: @pending_proposals_count) %>
          </p>
        </div>
        <div class="ml-3">
          <%= link_to curator_proposals_path, class: "text-sm font-medium text-amber-700 hover:text-amber-600" do %>
            <%= t("curator.dashboard.review_proposals") %> &rarr;
          <% end %>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Quick Actions -->
  <div class="rounded-lg bg-white shadow">
    <div class="px-4 py-4 sm:py-5 sm:px-6">
      <h2 class="text-base sm:text-lg font-medium text-gray-900"><%= t("curator.dashboard.quick_actions") %></h2>
      <div class="mt-3 sm:mt-4 flex flex-wrap gap-3 sm:gap-4">
        <%= link_to new_curator_location_path,
            class: "inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500" do %>
          <%= t("curator.dashboard.new_location") %>
        <% end %>
        <%= link_to new_curator_experience_path,
            class: "inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500" do %>
          <%= t("curator.dashboard.new_experience") %>
        <% end %>
        <%= link_to new_curator_plan_path,
            class: "inline-flex items-center justify-center rounded-md bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-emerald-500" do %>
          <%= t("curator.dashboard.new_plan") %>
        <% end %>
        <%= link_to new_curator_audio_tour_path,
            class: "inline-flex items-center justify-center rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500" do %>
          <%= t("curator.dashboard.new_audio_tour") %>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Recent Items Grid -->
  <div class="grid grid-cols-1 gap-4 sm:gap-6 lg:grid-cols-2">
    <!-- Recent Locations -->
    <div class="rounded-lg bg-white shadow">
      <div class="px-4 py-4 sm:py-5 sm:px-6">
        <div class="flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-medium text-gray-900"><%= t("curator.dashboard.recent_locations") %></h2>
          <%= link_to curator_locations_path, class: "text-sm text-emerald-600 hover:text-emerald-900" do %>
            <%= t("common.view_all") %>
          <% end %>
        </div>
        <ul class="mt-3 sm:mt-4 divide-y divide-gray-200">
          <% @stats[:recent_locations].each do |location| %>
            <li class="py-3">
              <%= link_to curator_location_path(location), class: "block hover:bg-gray-50 -mx-2 px-2 py-1 rounded-md" do %>
                <div class="flex items-center justify-between">
                  <div class="min-w-0 flex-1">
                    <div class="font-medium text-gray-900 truncate"><%= location.name %></div>
                    <div class="text-sm text-gray-500"><%= location.city %> &middot; <%= location.created_at.strftime("%d.%m.%Y") %></div>
                  </div>
                  <svg class="h-5 w-5 text-gray-400 flex-shrink-0 ml-2" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                  </svg>
                </div>
              <% end %>
            </li>
          <% end %>
          <% if @stats[:recent_locations].empty? %>
            <li class="py-4 text-center text-gray-500 text-sm"><%= t("curator.dashboard.no_locations") %></li>
          <% end %>
        </ul>
      </div>
    </div>

    <!-- Recent Experiences -->
    <div class="rounded-lg bg-white shadow">
      <div class="px-4 py-4 sm:py-5 sm:px-6">
        <div class="flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-medium text-gray-900"><%= t("curator.dashboard.recent_experiences") %></h2>
          <%= link_to curator_experiences_path, class: "text-sm text-emerald-600 hover:text-emerald-900" do %>
            <%= t("common.view_all") %>
          <% end %>
        </div>
        <ul class="mt-3 sm:mt-4 divide-y divide-gray-200">
          <% @stats[:recent_experiences].each do |experience| %>
            <li class="py-3">
              <%= link_to curator_experience_path(experience), class: "block hover:bg-gray-50 -mx-2 px-2 py-1 rounded-md" do %>
                <div class="flex items-center justify-between">
                  <div class="min-w-0 flex-1">
                    <div class="font-medium text-gray-900 truncate"><%= experience.title %></div>
                    <div class="text-sm text-gray-500"><%= experience.created_at.strftime("%d.%m.%Y") %></div>
                  </div>
                  <svg class="h-5 w-5 text-gray-400 flex-shrink-0 ml-2" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                  </svg>
                </div>
              <% end %>
            </li>
          <% end %>
          <% if @stats[:recent_experiences].empty? %>
            <li class="py-4 text-center text-gray-500 text-sm"><%= t("curator.dashboard.no_experiences") %></li>
          <% end %>
        </ul>
      </div>
    </div>

    <!-- Recent Reviews -->
    <div class="rounded-lg bg-white shadow">
      <div class="px-4 py-4 sm:py-5 sm:px-6">
        <div class="flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-medium text-gray-900"><%= t("curator.dashboard.recent_reviews_title") %></h2>
          <%= link_to curator_reviews_path, class: "text-sm text-emerald-600 hover:text-emerald-900" do %>
            <%= t("common.view_all") %>
          <% end %>
        </div>
        <ul class="mt-3 sm:mt-4 divide-y divide-gray-200">
          <% @stats[:recent_reviews].each do |review| %>
            <li class="py-3">
              <%= link_to curator_review_path(review), class: "block hover:bg-gray-50 -mx-2 px-2 py-1 rounded-md" do %>
                <div class="flex items-center justify-between">
                  <div class="min-w-0 flex-1">
                    <div class="flex items-center gap-1">
                      <% review.rating.times do %>
                        <svg class="h-3 w-3 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                      <% end %>
                      <span class="text-xs text-gray-500 ml-1"><%= review.reviewable_type %></span>
                    </div>
                    <div class="text-sm text-gray-500 truncate"><%= review.comment.presence&.truncate(50) || t("curator.reviews.no_comment") %></div>
                  </div>
                  <svg class="h-5 w-5 text-gray-400 flex-shrink-0 ml-2" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                  </svg>
                </div>
              <% end %>
            </li>
          <% end %>
          <% if @stats[:recent_reviews].empty? %>
            <li class="py-4 text-center text-gray-500 text-sm"><%= t("curator.dashboard.no_reviews") %></li>
          <% end %>
        </ul>
      </div>
    </div>

    <!-- Recent Public Plans -->
    <div class="rounded-lg bg-white shadow">
      <div class="px-4 py-4 sm:py-5 sm:px-6">
        <div class="flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-medium text-gray-900"><%= t("curator.dashboard.recent_plans") %></h2>
          <%= link_to curator_plans_path, class: "text-sm text-emerald-600 hover:text-emerald-900" do %>
            <%= t("common.view_all") %>
          <% end %>
        </div>
        <ul class="mt-3 sm:mt-4 divide-y divide-gray-200">
          <% @stats[:recent_plans].each do |plan| %>
            <li class="py-3">
              <%= link_to curator_plan_path(plan), class: "block hover:bg-gray-50 -mx-2 px-2 py-1 rounded-md" do %>
                <div class="flex items-center justify-between">
                  <div class="min-w-0 flex-1">
                    <div class="font-medium text-gray-900 truncate"><%= plan.title %></div>
                    <div class="text-sm text-gray-500"><%= plan.city_name %> &middot; <%= plan.user&.username || t("curator.plans.no_author") %></div>
                  </div>
                  <svg class="h-5 w-5 text-gray-400 flex-shrink-0 ml-2" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                  </svg>
                </div>
              <% end %>
            </li>
          <% end %>
          <% if @stats[:recent_plans].empty? %>
            <li class="py-4 text-center text-gray-500 text-sm"><%= t("curator.dashboard.no_plans") %></li>
          <% end %>
        </ul>
      </div>
    </div>
  </div>

  <!-- Recent Curator Activities -->
  <%= render "curator/shared/activity_feed",
      activities: @recent_activities,
      title: t("curator.dashboard.recent_activity"),
      show_user: true %>
</div>
