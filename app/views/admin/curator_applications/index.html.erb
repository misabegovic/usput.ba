<div class="space-y-6">
  <div class="sm:flex sm:items-center sm:justify-between">
    <h1 class="text-xl sm:text-2xl font-bold text-gray-900"><%= t("admin.curator_applications.title") %></h1>
  </div>

  <!-- Stats -->
  <div class="grid grid-cols-3 gap-2 sm:gap-4">
    <div class="overflow-hidden rounded-lg bg-yellow-50 px-3 py-3 shadow sm:px-4 sm:py-5 sm:p-6">
      <dt class="truncate text-xs sm:text-sm font-medium text-yellow-600"><%= t("admin.curator_applications.stats.pending") %></dt>
      <dd class="mt-1 text-xl sm:text-3xl font-semibold tracking-tight text-yellow-900"><%= @stats[:pending] %></dd>
    </div>
    <div class="overflow-hidden rounded-lg bg-green-50 px-3 py-3 shadow sm:px-4 sm:py-5 sm:p-6">
      <dt class="truncate text-xs sm:text-sm font-medium text-green-600"><%= t("admin.curator_applications.stats.approved") %></dt>
      <dd class="mt-1 text-xl sm:text-3xl font-semibold tracking-tight text-green-900"><%= @stats[:approved] %></dd>
    </div>
    <div class="overflow-hidden rounded-lg bg-red-50 px-3 py-3 shadow sm:px-4 sm:py-5 sm:p-6">
      <dt class="truncate text-xs sm:text-sm font-medium text-red-600"><%= t("admin.curator_applications.stats.rejected") %></dt>
      <dd class="mt-1 text-xl sm:text-3xl font-semibold tracking-tight text-red-900"><%= @stats[:rejected] %></dd>
    </div>
  </div>

  <!-- Filters -->
  <div class="flex flex-wrap gap-2">
    <%= link_to t("common.all"), admin_curator_applications_path,
        class: "px-3 py-1 rounded-full text-xs sm:text-sm #{params[:status].blank? ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}" %>
    <%= link_to t("admin.curator_applications.stats.pending"), admin_curator_applications_path(status: :pending),
        class: "px-3 py-1 rounded-full text-xs sm:text-sm #{params[:status] == 'pending' ? 'bg-yellow-500 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}" %>
    <%= link_to t("admin.curator_applications.stats.approved"), admin_curator_applications_path(status: :approved),
        class: "px-3 py-1 rounded-full text-xs sm:text-sm #{params[:status] == 'approved' ? 'bg-green-500 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}" %>
    <%= link_to t("admin.curator_applications.stats.rejected"), admin_curator_applications_path(status: :rejected),
        class: "px-3 py-1 rounded-full text-xs sm:text-sm #{params[:status] == 'rejected' ? 'bg-red-500 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}" %>
  </div>

  <!-- Desktop Table -->
  <div class="hidden sm:block overflow-hidden rounded-lg bg-white shadow">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"><%= t("admin.curator_applications.user") %></th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"><%= t("admin.curator_applications.status_label") %></th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"><%= t("admin.curator_applications.submitted") %></th>
          <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"><%= t("admin.curator_applications.actions") %></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <% @applications.each do |application| %>
          <tr>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="text-sm font-medium text-gray-900"><%= application.user.username %></div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <% case application.status %>
              <% when "pending" %>
                <span class="inline-flex items-center rounded-full bg-yellow-100 px-2.5 py-0.5 text-xs font-medium text-yellow-800">
                  <%= t("curator_applications.status.pending") %>
                </span>
              <% when "approved" %>
                <span class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800">
                  <%= t("curator_applications.status.approved") %>
                </span>
              <% when "rejected" %>
                <span class="inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800">
                  <%= t("curator_applications.status.rejected") %>
                </span>
              <% end %>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
              <%= application.created_at.strftime("%d.%m.%Y %H:%M") %>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2">
              <%= link_to t("admin.curator_applications.view"), admin_curator_application_path(application),
                  class: "text-indigo-600 hover:text-indigo-900" %>
              <% if application.pending? %>
                <%= button_to t("admin.curator_applications.approve_btn"), approve_admin_curator_application_path(application),
                    method: :post,
                    class: "text-green-600 hover:text-green-900",
                    data: { turbo_confirm: t("admin.curator_applications.confirm_approve", username: application.user.username) } %>
                <%= button_to t("admin.curator_applications.reject_btn"), reject_admin_curator_application_path(application),
                    method: :post,
                    class: "text-red-600 hover:text-red-900",
                    data: { turbo_confirm: t("admin.curator_applications.confirm_reject", username: application.user.username) } %>
              <% end %>
            </td>
          </tr>
        <% end %>

        <% if @applications.empty? %>
          <tr>
            <td colspan="4" class="px-6 py-8 text-center text-gray-500">
              <%= t("admin.curator_applications.no_applications") %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <!-- Mobile Card Layout -->
  <div class="sm:hidden space-y-3">
    <% @applications.each do |application| %>
      <div class="bg-white rounded-lg shadow p-4">
        <div class="flex items-center justify-between mb-3">
          <span class="font-medium text-gray-900"><%= application.user.username %></span>
          <% case application.status %>
          <% when "pending" %>
            <span class="inline-flex items-center rounded-full bg-yellow-100 px-2 py-0.5 text-xs font-medium text-yellow-800">
              <%= t("curator_applications.status.pending") %>
            </span>
          <% when "approved" %>
            <span class="inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800">
              <%= t("curator_applications.status.approved") %>
            </span>
          <% when "rejected" %>
            <span class="inline-flex items-center rounded-full bg-red-100 px-2 py-0.5 text-xs font-medium text-red-800">
              <%= t("curator_applications.status.rejected") %>
            </span>
          <% end %>
        </div>
        <div class="text-sm text-gray-500 mb-3">
          <%= application.created_at.strftime("%d.%m.%Y %H:%M") %>
        </div>
        <div class="flex flex-wrap items-center gap-3 text-sm">
          <%= link_to t("admin.curator_applications.view"), admin_curator_application_path(application),
              class: "text-indigo-600 hover:text-indigo-900" %>
          <% if application.pending? %>
            <%= button_to t("admin.curator_applications.approve_btn"), approve_admin_curator_application_path(application),
                method: :post,
                class: "text-green-600 hover:text-green-900",
                data: { turbo_confirm: t("admin.curator_applications.confirm_approve", username: application.user.username) } %>
            <%= button_to t("admin.curator_applications.reject_btn"), reject_admin_curator_application_path(application),
                method: :post,
                class: "text-red-600 hover:text-red-900",
                data: { turbo_confirm: t("admin.curator_applications.confirm_reject", username: application.user.username) } %>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @applications.empty? %>
      <div class="bg-white rounded-lg shadow p-8 text-center text-gray-500">
        <%= t("admin.curator_applications.no_applications") %>
      </div>
    <% end %>
  </div>
</div>
